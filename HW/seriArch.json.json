{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"nzp(V(w1?Bf{!M|Fz1%g\">data</variable><variable id=\".B/~qgfk,~tkG|C_[_xn\">den1</variable><variable id=\"~h{t/i#Q:huD@~*Rc^2X\">maybom</variable></variables><block type=\"yolobit_events_timer\" id=\"y0oxl}=BV!Np]}BLCjRB\" x=\"438\" y=\"-138\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"qYD(E%F=.wG03qnHi.0.\"><field name=\"NUM\">0.5</field></shadow></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\"}=c?#8YhlH~78r:TcPU|\"><field name=\"VAR\" id=\"nzp(V(w1?Bf{!M|Fz1%g\">data</field><value name=\"VALUE\"><block type=\"yolobit_device_read_terminal\" id=\"GkpKfb^Dy{qcV4O@ld~{\"></block></value><next><block type=\"aiot_lcd1602_display\" id=\"{u?7T(T]DgYzTKwj1?:d\"><value name=\"string\"><shadow type=\"text\" id=\"QgT,s]H5O|p~|OUR2`p4\"><field name=\"TEXT\">Hello</field></shadow><block type=\"variables_get\" id=\"U!7wLAX9U[Nabq$3(s3$\"><field name=\"VAR\" id=\"nzp(V(w1?Bf{!M|Fz1%g\">data</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"=|[#,x+mga_q)_p=)GN4\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"Bsi.0or/i[?t``_!p1Vg\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\" id=\"kL_npZIUTEPdK72eX;|x\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\")-co@@wbTo/PcTEV[mdN\"><field name=\"OP\">LT</field><value name=\"A\"><block type=\"math_tonum\" id=\"Lv_bL0d``^7Fdl1U9vs_\"><value name=\"A\"><block type=\"variables_get\" id=\")[WvMQyVuseD:p)AKt/n\"><field name=\"VAR\" id=\"nzp(V(w1?Bf{!M|Fz1%g\">data</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"R@M-9n,Y6%Hmu~:2K0uN\"><field name=\"NUM\">2</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"695ux)$0ryIW?E=oCtt.\"><field name=\"port\">pin0</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"g~=;6yDdEO#{IkBfv:)G\"><field name=\"COLOUR\">#ff0000</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_led_tiny_set_all\" id=\"j`6?hob9j2hZV0dFt?oZ\"><field name=\"port\">pin0</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"YxQGlB`t:!@3RbX4t9_;\"><field name=\"COLOUR\">#000000</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"[wQZqy%d:_D?UrRK_X7S\"><value name=\"IF0\"><block type=\"aiot_detect_motion\" id=\"35%1?.8u.T+:]..22FD*\"><field name=\"NAME\">pin16</field></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"NwxA/va]P|rX%!gHSEM3\"><field name=\"VAR\" id=\".B/~qgfk,~tkG|C_[_xn\">den1</field><value name=\"VALUE\"><block type=\"math_number\" id=\"],te[vJI2`-+JD[_rM:v\"><field name=\"NUM\">300</field></block></value><next><block type=\"yolobit_events_broadcast_message\" id=\"*UaC@T~}g8-NA^(]_W`d\"><field name=\"MESSAGE\">0</field></block></next></block></statement><next><block type=\"controls_if\" id=\"p}L*efI)JP0kFLPZ-GCi\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"+Mq!j|VjC9(Z?}_xRJ/f\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"aiot_dht_read\" id=\"jV%~s$,xDn@Ys7O=jR-t\"><field name=\"DATA\">TEMP</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"$/em#VtptWm^OpH$Y9mR\"><field name=\"NUM\">30</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"(V9;R:b6K|5|*OmlcLKJ\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\":r]/uwGx4)q:7.1Bl!A%\"><field name=\"NUM\">70</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_minifan\" id=\"sfBIG/r3:4+J_(IYH+Sp\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"CH{I6eu.UHtA#NKzU]fo\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"qd~I5;]n5iA*Eew6E4~i\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"aiot_ultrasonic_checkdistance\" id=\"B{_AG]2Er[1NjfI#l[eV\"><field name=\"TYPE\">CM</field><value name=\"DISTANCE\"><shadow type=\"math_number\" id=\"g{GH](_MHAI?$m0kDG0#\"><field name=\"NUM\">5</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"u*N/30fgF@(hfGE/ZUXG\"><field name=\"VAR\" id=\"~h{t/i#Q:huD@~*Rc^2X\">maybom</field><value name=\"VALUE\"><block type=\"math_number\" id=\"1xbMh5q?P]/Q89)E*;%w\"><field name=\"NUM\">10</field></block></value><next><block type=\"yolobit_events_broadcast_message\" id=\"#m:wNL^oxJJWb5XC^.+t\"><field name=\"MESSAGE\">1</field></block></next></block></statement><statement name=\"ELSE\"><block type=\"plantbit2_dual_usb_pump\" id=\"*,H9[o-abt?nrQQg_MQ3\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\";x`/(;KrpkSv.Mv+IGAa\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-313\" y=\"-88\"><statement name=\"ONSTART\"><block type=\"aiot_lcd1602_clear\" id=\"00%,F~5d5U71j6^`ej$m\"><next><block type=\"aiot_lcd1602_display\" id=\"+E8@`TxZde|:BQ6:_6|v\"><value name=\"string\"><shadow type=\"text\" id=\"-M.4wE-03-?q6UoH]98.\"><field name=\"TEXT\">Hello</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"`u/Hn`k0Wwq/`0m?_BWe\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"rTyeKS(d;zGea:9`GF_~\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_ultrasonic_create\" id=\"nS2T3$*=kNU*U:_L6.$t\"><field name=\"TRG\">pin3</field><field name=\"ECH\">pin6</field></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_events_run\" id=\"zMUVcm6h)jmyh_Hn5v7+\"><next><block type=\"yolobit_basic_sleep\" id=\"1kH?i5_PM6HEXF;V`,yo\"><value name=\"duration\"><shadow type=\"math_number\" id=\"zx[I/LkH]t#u_zA=AXzT\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></statement></block><block type=\"yolobit_events_message\" id=\"{.7Q=W.%fB)E:/OzKD*:\" x=\"1138\" y=\"13\"><field name=\"MESSAGE\">0</field><statement name=\"ACTION\"><block type=\"aiot_led_tiny_set_all\" id=\"NWjc*7oVnTE}|mMu9PXB\"><field name=\"port\">pin14</field><field name=\"option\">1</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"z;ZZ+UASZARK_sKO3*^E\"><field name=\"COLOUR\">#ff0000</field></shadow></value><next><block type=\"controls_if\" id=\"5i06lL*%n0i|@~3rPs?U\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"XS|J`iB(?tk~cE_Tp7Un\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"XwoN.([]uFqPb-%k|;#;\"><field name=\"VAR\" id=\".B/~qgfk,~tkG|C_[_xn\">den1</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"19:b:co*O^ggR0wdNQ(1\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"$OcfxEt@b+[SiBmgkgaW\"><field name=\"port\">pin14</field><field name=\"option\">1</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"@**@r^.gBIFAuEWW_F7.\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"variables_set\" id=\"(`KJ=d+CYhIC:M(wo]YS\"><field name=\"VAR\" id=\".B/~qgfk,~tkG|C_[_xn\">den1</field><value name=\"VALUE\"><block type=\"math_number\" id=\",He$ysNV+=+,FuzN#)5w\"><field name=\"NUM\">300</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"math_change\" id=\"lq#}.0S#obYp!,Tk2cvm\"><field name=\"VAR\" id=\".B/~qgfk,~tkG|C_[_xn\">den1</field><value name=\"DELTA\"><shadow type=\"math_number\" id=\"#pbZY,AQL)[hPw73]hdX\"><field name=\"NUM\">-1</field></shadow></value></block></statement></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"|eALfl0S,tgypgRZW7t+\" x=\"-313\" y=\"138\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"UvU;/qlRcX8f[YmUF2Kd\"><field name=\"NUM\">1</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\"#,_V^xRGXto[LF#96x=K\"><next><block type=\"xbot_serial_write_line\" id=\"%R6Wl]Y,N|V{,d~N~++8\"><value name=\"line\"><shadow type=\"text\" id=\"=2ZuQ:,yu{K3,XJp^|[G\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"R0|gMTA-g2-4H+x4LjRt\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"qdbghUVIAP{Df)eCQ$P7\"><field name=\"TEXT\">!1:T:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"5`e]8eSZ[pS3Pf$fTXg+\"><field name=\"DATA\">TEMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"dujTI64l.Rm`2jlrmkr$\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_line\" id=\"Kl{/G:8av_?c@@ip|mjV\"><value name=\"line\"><shadow type=\"text\" id=\"[74_=Ha/bm3jJ@ma21^)\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\";h+R?m6Qun6eq-X#_oCb\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"fwbw..HhJq`1K1o%laMP\"><field name=\"TEXT\">!1:H:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"mzZ{8qgrS`#Ztg=q)/56\"><field name=\"DATA\">HUMID</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"CWu{=omb|#]Kjw4,9O-p\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></statement></block><block type=\"yolobit_events_message\" id=\"V2Hm!a{}qHcqzc#H~CCS\" x=\"1113\" y=\"313\"><field name=\"MESSAGE\">1</field><statement name=\"ACTION\"><block type=\"plantbit2_dual_usb_pump\" id=\"M^Lm?DCr5zmjG,C]]x^}\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\"]$*@?WZ_T.!M+g63mM];\"><field name=\"NUM\">70</field></shadow></value><next><block type=\"controls_if\" id=\"j9jz=gWW%?ZOr6V}Bg#~\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"$BzH2=WjLNYb68i2=K`j\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"k)eLh^sH+}?x1:WLT)lF\"><field name=\"VAR\" id=\"~h{t/i#Q:huD@~*Rc^2X\">maybom</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"|CVHiQ2~Yr#Qty65{~b*\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"plantbit2_dual_usb_pump\" id=\"49-|9!2B32*CB}d@vS@=\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\")U]|3%=^r.f+yhfZQPJ+\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"!CZlQ!W6~D3V7UfE4uTc\"><field name=\"VAR\" id=\"~h{t/i#Q:huD@~*Rc^2X\">maybom</field><value name=\"VALUE\"><block type=\"math_number\" id=\"{S9-!qB?~T@c.309!yvA\"><field name=\"NUM\">10</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"math_change\" id=\"h%Q^v;@P7Q3;Gij+`O[a\"><field name=\"VAR\" id=\"~h{t/i#Q:huD@~*Rc^2X\">maybom</field><value name=\"DELTA\"><shadow type=\"math_number\" id=\"wS`HPNZv{{dy_-g[3Mwo\"><field name=\"NUM\">-1</field></shadow></value></block></statement></block></next></block></statement></block></xml>","python":"from event_manager import *\nimport sys\nimport uselect\nfrom aiot_lcd1602 import LCD1602\nfrom yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom aiot_rgbled import RGBLed\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nfrom aiot_hcsr04 import HCSR04\nimport time\n\nevent_manager.reset()\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\naiot_lcd1602 = LCD1602()\n\ntiny_rgb = RGBLed(pin14.pin, 4)\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\ndef on_event_timer_callback_y_o_x_l_B():\n  global data, den1, maybom\n  data = read_terminal_input()\n  aiot_lcd1602.move_to(0, 1)\n  aiot_lcd1602.putstr(data)\n  if (int(data)) < 2:\n    tiny_rgb.show(0, hex_to_rgb('#ff0000'))\n  else:\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n  if pin16.read_digital()==1:\n    den1 = 300\n    event_manager.broadcast_message(0)\n  if (aiot_dht20.dht20_temperature()) > 30:\n    pin10.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  else:\n    pin10.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  if aiot_ultrasonic.distance_cm() < 5:\n    maybom = 10\n    event_manager.broadcast_message(1)\n  else:\n    pin14.write_analog(round(translate(0, 0, 100, 0, 1023)))\n\nevent_manager.add_timer_event(500, on_event_timer_callback_y_o_x_l_B)\n\ndef on_event_message_callback_Q_W_f_B_E():\n  global data, den1, maybom\n  tiny_rgb.show(1, hex_to_rgb('#ff0000'))\n  if den1 == 0:\n    tiny_rgb.show(1, hex_to_rgb('#000000'))\n    den1 = 300\n  else:\n    den1 = (den1 if isinstance(den1, (int, float)) else 0) + -1\n\nevent_manager.add_message_event(0, on_event_message_callback_Q_W_f_B_E)\n\ndef on_event_timer_callback_e_A_L_f_l():\n  global data, den1, maybom\n  aiot_dht20.read_dht20()\n  print((''.join([str(x) for x in ['!1:T:', aiot_dht20.dht20_temperature(), '#']])))\n  print((''.join([str(x2) for x2 in ['!1:H:', aiot_dht20.dht20_humidity(), '#']])))\n\nevent_manager.add_timer_event(1000, on_event_timer_callback_e_A_L_f_l)\n\ndef on_event_message_callback_V_H_m_a_q():\n  global data, den1, maybom\n  pin14.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  if maybom == 0:\n    pin14.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    maybom = 10\n  else:\n    maybom = (maybom if isinstance(maybom, (int, float)) else 0) + -1\n\nevent_manager.add_message_event(1, on_event_message_callback_V_H_m_a_q)\n\nif True:\n  aiot_lcd1602.clear()\n  aiot_lcd1602.move_to(0, 0)\n  aiot_lcd1602.putstr('Hello')\n  aiot_ultrasonic = HCSR04(trigger_pin=pin3.pin, echo_pin=pin6.pin)\n\nwhile True:\n  event_manager.run()\n  time.sleep_ms(1000)\n","name":"seriArch","extensions":[{"id":"yolobit-AITT-VN-yolobit_plantbit_v2","src":"https://github.com/AITT-VN/yolobit_plantbit_v2","name":"PLANT:BIT V2","description":"Mục mở rộng dành cho bộ kit trồng cây thông minh Plant:Bit"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"}],"device":"yolobit"}